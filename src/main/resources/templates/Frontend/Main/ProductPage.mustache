<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <title>Dashboard - SB Admin</title>
    <link href="/css/Main/product.css" rel="stylesheet"/>
    <link href="/css/Main/style.css" rel="stylesheet"/>
    <link href="/css/Main/caro.css" rel="stylesheet"/>

    <style>
    .btn-grey{
    background-color:#D8D8D8;
	color:#FFF;
}
.rating-block{
	background-color:#FAFAFA;
	border:1px solid #EFEFEF;
	padding:15px 15px 20px 15px;
	border-radius:3px;
}
.bold{
	font-weight:700;
}
.padding-bottom-7{
	padding-bottom:7px;
}

.review-block{
	background-color:#FAFAFA;
	border:1px solid #EFEFEF;
	padding:15px;
	border-radius:3px;
	margin-bottom:15px;
}
.review-block-name{
	font-size:12px;
	margin:10px 0;
}
.review-block-date{
	font-size:12px;
}
.review-block-rate{
	font-size:13px;
	margin-bottom:15px;
}
.review-block-title{
	font-size:15px;
	font-weight:700;
	margin-bottom:10px;
}
.review-block-description{
	font-size:13px;
}

    </style>
    <link href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css" rel="stylesheet"
          crossorigin="anonymous"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/js/all.min.js"
            crossorigin="anonymous"></script>
</head>
<body>
<header>
<nav style="background-color:black;">
        <div class="menu-icon">

           <div >
           
        </div>
      
            <i class="fa fa-bars fa-2x"></i>

              
        </div>
        
          <div class="logo" >
     <a href="http://localhost:8888/Index/"><img style="float: left; margin-right: 1%;" src="/img/pikto.png" width="100"/></a>
        </div>
     
         


        <div class="menu">
            <ul>
                <li><a href="http://localhost:8888/Index/Category/1">Backgrounds</a></li>
                <li><a href="http://localhost:8888/Index/Category/2">Stockphotos</a></li>
                <li><a href="http://localhost:8888/Index/Category/3">Posters</a></li>

                <li id="loggedinfalse"><a href="http://localhost:8888/Index/Checkout/{{sessionId}}" >
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                         class="bi bi-cart-fill"viewBox="0 0 16 16">
                        <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                    </svg>
                </a></li>

                 <li id="loggedintrue" style="display:none;"><a href="http://localhost:8888/User/Checkout">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                         class="bi bi-cart-fill"viewBox="0 0 16 16">
                        <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                    </svg>
                </a></li>


                <a href="http://localhost:8888/User/{{userData.userId}}"><li class="loggedIn" style="display:none;" id="true"> <i class='fas fa-user-alt'  style='font-size:17px;'></i></li></a>

               <a href="http://localhost:8888/login"><li class="{{loggedIn}}" id="login"> <i class='fas fa-user-alt'  style='font-size:17px;'></i></li></a>



            </ul>
        </div>
    </nav>
    </header>


        <main>
            <div class="container" style="padding-top: 100px;">


                    <div class="row">

                        <div class="container">
                            <div class="card">
                                <div class="container-fliud">
                                        <div class="preview col-md-7" style="margin-left:auto; margin-right:auto;">
                                        <h1 class="product-title">{{Product.title}}</h1>
                                        <h1 class="sale" id="sale" style="display:none;">{{Product.discount}}</h1>


                                            <div class="preview-pic tab-content">
                                                <div class="tab-pane active" id="pic-1"><img
                                                        src="{{Product.productUrl}}"/></div>
                                            </div>
                                              <div class="rating" style="padding-top:20px;">
                                                <div class="stars">
                                                    <span id="fa1" class="fa fa-star"></span>
                                                    <span id="fa2" class="fa fa-star"></span>
                                                    <span id="fa3" class="fa fa-star"></span>
                                                    <span id="fa4" class="fa fa-star"></span>
                                                    <span id="fa5" class="fa fa-star"></span>
                                                    <span id="numRev"></span>
                                                </div>
                                            </div>
                                            <h4 id="normalPrice">{{Product.price}} SEK</h4>
                                            <h4 id="PriceOver" style="display:none;"><del>{{Product.price}} SEK</del></h4>
                                             <h4 id="newPrice" style="display:none; color:red;">SEK</h4>

                                              <p class="product-description">{{Product.summary}}</p>
                                          
                                            <div class="action">
                                                <form action="http://localhost:8888/Index/addToCart/{{Product.productId}}">
                                        <button type="submit" class="btn btn-info"><i class="fa fa-cart-plus" aria-hidden="true"></i>  Add to cart</button>
                                                </form>


                                        </div>
                                      
                                </div>
                        </div>


                    </div>

             




    <div class="row mb-md-2">
      {{#Reviews}}
        <div class="col-md-6 col-lg-4">
                                      

            <div class="card shadow-sm border-light mb-4">
                    <img src="{{pictureUrl}}" style="object-fit:cover; width:300px; height:200px;" class="card-img-top" alt="image" > 
                <div class="card-body">
                   <h5>{{title}}</h5>
                                      <h6>{{firstname}} {{lastname}}</h6>

                    <div class="post-meta"><span class="small lh-120"> {{createdAt}}</span></div>
                    

                                            <div class="review-block-rate" id="{{rating}}">
                                                <button type="button" id="star1" class="btn btn-default btn-grey btn-sm"
                                                        aria-label="Left Align">
                                                    <span class="glyphicon glyphicon-star" aria-hidden="true"></span>
                                                </button>

                                                <button type="button" id="star2" class="btn btn-default btn-grey btn-sm"
                                                        aria-label="Left Align">
                                                    <span class="glyphicon glyphicon-star" aria-hidden="true"></span>
                                                </button>

                                                <button type="button" id="star3" class="btn btn-default btn-grey btn-sm"
                                                        aria-label="Left Align">
                                                    <span class="glyphicon glyphicon-star" aria-hidden="true"></span>
                                                </button>

                                                <button type="button" id="star4" class="btn btn-default btn-grey btn-sm"
                                                        aria-label="Left Align">
                                                    <span class="glyphicon glyphicon-star" aria-hidden="true"></span>
                                                </button>

                                                <button type="button" id="star5" class="btn btn-default btn-grey btn-sm"
                                                        aria-label="Left Align">
                                                    <span class="glyphicon glyphicon-star" aria-hidden="true"></span>
                                                </button>
                                            </div>

                       <p>{{content}}</p>
                </div>
            </div>
        </div>

     {{/Reviews}}

      
      
    </div>




   </div>
                             


        </main>


     
    

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js" crossorigin="anonymous"></script>
<script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery-slim.min.js"><\/script>')</script>

<script>

     var discount=document.getElementById('sale').innerHTML;
     var price=document.getElementById('normalPrice').innerHTML;
     var intPrice=price.replace( " SEK", '');
     var floatPrice=parseFloat(intPrice);
    var floatDiscount=parseFloat(discount);
     var monetaryDiscount=floatPrice*floatDiscount;
    var salePrice=intPrice-monetaryDiscount;
    alert(discount);
    if(discount==0.0){

    } else{
       document.getElementById("normalPrice").style.display = "none";
        document.getElementById("PriceOver").style.display = "block";
       document.getElementById("newPrice").innerHTML = salePrice+ " SEK";
        document.getElementById("newPrice").style.display = "block";

        

    }

    $('.review-block-rate').each(function (index, value) {
        var id = $(this).attr('id');
        console.log(id);
        $(this).children("button").each(function (index2, value2) {
            if (id == 1 && index2 < id) {
                $(this).removeClass("btn btn-default btn-grey btn-sm").addClass("btn btn-warning btn-sm");
            }
            if (id == 2 && index2 < id) {
                $(this).removeClass("btn btn-default btn-grey btn-sm").addClass("btn btn-warning btn-sm");
            }

            if (id == 3 && index2 < id) {
                $(this).removeClass("btn btn-default btn-grey btn-sm").addClass("btn btn-warning btn-sm");
            }

            if (id == 4 && index2 < id) {
                $(this).removeClass("btn btn-default btn-grey btn-sm").addClass("btn btn-warning btn-sm");
            }

            if (id == 5 && index2 < id) {
                $(this).removeClass("btn btn-default btn-grey btn-sm").addClass("btn btn-warning btn-sm");
            }

        })

     
    });
    var sum=0;
    var count=0;
    $('.review-block-rate').each(function(i, obj) {
     count++;
      var i= $(this).attr('id');
       sum =sum+(parseInt(i));

});

if(count===1){
 
  $( "#numRev" ).html( count+" review" );

}

else{ $( "#numRev" ).html( count+" reviews" );

}

$('.stars').each(function (index, value) {
      
      var avg=Math.round(sum/count);
      
        $(this).children("span").each(function (index2, value2) {
            if (avg == 1 && index2 < avg) {
                $(this).removeClass("fa fa-star").addClass("fa fa-star checked");
            }
            if (avg == 2 && index2 < avg) {
                $(this).removeClass("fa fa-star").addClass("fa fa-star checked");
            }

            if (avg == 3 && index2 < avg) {
                $(this).removeClass("fa fa-star").addClass("fa fa-star checked");
            }

            if (avg == 4 && index2 < avg) {
                $(this).removeClass("fa fa-star").addClass("fa fa-star checked");
            }

            if (avg == 5 && index2 < avg) {
                $(this).removeClass("fa fa-star").addClass("fa fa-star checked");
            }
             
          


        })

     
    });
     var loggedin = $("#login").attr("class");
    console.log(loggedin);

    if (loggedin === "loggedintrue") {
        $("#login").css("display", "none");
        $("#true").css("display", "inline-block");
        $("#loggedintrue").css("display", "inline-block");
        $("#loggedinfalse").css("display", "none");


    }


</script>
</body>
</html>
